<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Sasha Laundy]]></title>
  <link href="http://sursh.github.com/atom.xml" rel="self"/>
  <link href="http://sursh.github.com/"/>
  <updated>2015-04-11T18:56:40-04:00</updated>
  <id>http://sursh.github.com/</id>
  <author>
    <name><![CDATA[Sasha Laundy]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[My talk at Pycon]]></title>
    <link href="http://sursh.github.com/blog/2015/04/11/my-talk-at-pycon/"/>
    <updated>2015-04-11T15:55:00-04:00</updated>
    <id>http://sursh.github.com/blog/2015/04/11/my-talk-at-pycon</id>
    <content type="html"><![CDATA[<p>More information and links from my Pycon talk are <a href="http://sursh.github.com/talks/asking-helping">here!</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How I Prep in the 24 Hours Before Giving a Conference Talk]]></title>
    <link href="http://sursh.github.com/blog/2015/02/23/how-i-prep-in-the-24-hours-before-a-conference-talk/"/>
    <updated>2015-02-23T16:19:00-05:00</updated>
    <id>http://sursh.github.com/blog/2015/02/23/how-i-prep-in-the-24-hours-before-a-conference-talk</id>
    <content type="html"><![CDATA[<p>Last week, I gave a talk at Strata, O&#8217;Reilly&#8217;s data science conference. Every time I give a talk I get a little bit better at it. I&#8217;ve seen a lot about how to propose talks and prepare slides, but less written about preparing right before your talk. Here&#8217;s what I&#8217;ve figured out works best for me. I&#8217;d also really love to <a href="http://twitter.com/sashalaundy">hear from you</a> about how you prepare!</p>

<p>Part of my motivation for a behind-the-scenes post like this is that beginners compare polished final products to their own messy work and then they are sad. It is important to know that behind every polished talk there is no magic, just messy work! Lots and lots of messy work.</p>

<p>So here is my messy work—some things I did this time that worked well.</p>

<p>First of all, <strong>I signed up to give the talk beforehand at a different conference</strong> in my hometown. This forced me to prepare <em>months</em> ahead of time and I was able to gather some helpful feedback. This is a GREAT idea and I plan to do it as much as possible.</p>

<p>By the time I was getting on the plane, I had already created 80% of the slides I needed. So in the 24 hours before the talk, here&#8217;s how I prepared:</p>

<ul>
<li><p>I paged through my old <strong>slides</strong> and decided what sections to cut out. I needed to cut the talk from 30 minutes to 16 minutes, and some pieces of it were &#8216;nice to have&#8217; but not critical to my main points. I left placeholders where I thought I needed to add slides. It&#8217;s really tempting at this point to fuss with the slides forever. Resist!</p></li>
<li><p>I immediately did a <strong>live runthrough</strong>! I just stood up and started talking over my slides as if I were presenting for real. This was so awkward at first but a few minutes in I was sailing! There were some rough spots but never as many as I expect, which made me feel really good! A large part of being prepared is managing your own emotions so this is actually really important!</p></li>
<li><p>I used Keynote to <strong>record</strong> this runthrough, which is very easy to do (I love Keynote). I then listened to it and noted rough spots: places where I rambled, tough transitions, and slides that need to be adjusted or removed.</p></li>
</ul>


<p><img class="left" src="https://s3.amazonaws.com/f.cl.ly/items/1Y05452c1Y3S471Y0m12/prep%201.JPG" title="Talk preparation" alt="A picture of my laptop and notes on a hotel dresser."></p>

<p><em>Preparing in my hotel room. Gotta keep up the potassium.</em></p>

<p><img class="left" src="https://s3.amazonaws.com/f.cl.ly/items/2F0T3S201z3A2n2z0p2d/prep%202.JPG" title="Notes on what to change" alt="A picture of notes I took on my talk."></p>

<p><em>Notes on what to change for next time.</em></p>

<ul>
<li><p>At this point, I paid closest attention to the <strong>transitions</strong>. At this point the slides were pretty set, but what went between them was a little rough. I like each slide to be set up by my words before it comes on, and transitions are absolutely key to continuity. I sometimes left extremely brief notes to myself in all caps in the presenter notes just in case I brainfarted on stage.</p></li>
<li><p>When I did this rough runthrough, I did it standing up and with my clicker. I tried to <strong>picture the conference room</strong> in front of me. That way, wouldn&#8217;t be as surprising to walk up on stage and I could be nice and calm during the real thing.</p></li>
<li><p>I made sure I knew how to get <strong>presenter tools</strong> to appear when I plugged my computer into the big screen. Hint: you need to know the menu-bar-dragging trick in Display Preferences.</p></li>
<li><p>I wrote a little stickie that said &#8216;TALK SLOWLY :)&#8217; and put it next to the keyboard on my laptop</p></li>
<li><p>I made PDF copies and put <strong>backups</strong> in Dropbox, just in case my laptop met a watery end at lunch.</p></li>
<li><p>I made a <strong><a href="http://sursh.github.com/talks/data-vitals">quick little landing page</a></strong> for the talk. I pointed to it from the top of my website and a pinned tweet so people could find it easily during the talk, and I added useful stuff to it right away. The bulk of your audience may not even be in the room so this is a great way to get the most value out of your talk. For example, there were about 30 people heard me deliver my PyData NYC talk and over 1,000 have watched the video on Youtube.</p></li>
<li><p>And of course, I <a href="http://www.ted.com/talks/amy_cuddy_your_body_language_shapes_who_you_are?language=en">power posed</a> :)</p></li>
</ul>


<p>This is what I&#8217;ve found to work for me for prepping in the 24 hours before the talk. What works for you?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My talk at Strata San Jose]]></title>
    <link href="http://sursh.github.com/blog/2015/02/19/my-talk-at-strata-san-jose/"/>
    <updated>2015-02-19T11:12:00-05:00</updated>
    <id>http://sursh.github.com/blog/2015/02/19/my-talk-at-strata-san-jose</id>
    <content type="html"><![CDATA[<p>Looking for the links and book recommendations from today&#8217;s talk at Strata? <a href="http://sursh.github.com/talks/data-vitals">Here you go</a>.</p>

<p>Make sure to bookmark the page as I&#8217;ll be adding more later today.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The best lesson from Hacker School is hiding in plain sight]]></title>
    <link href="http://sursh.github.com/blog/2014/12/05/the-best-lesson-from-hacker-school-is-hiding-in-plain-sight/"/>
    <updated>2014-12-05T07:39:00-05:00</updated>
    <id>http://sursh.github.com/blog/2014/12/05/the-best-lesson-from-hacker-school-is-hiding-in-plain-sight</id>
    <content type="html"><![CDATA[<p>Last spring I attended <a href="http://hackerschool.com">Hacker School</a>, which is a 12-week retreat for programmers in NYC. It is a truly fantastic program and many other Hacker Schoolers have written lots of nice things about the program and advice to new folks that you can find <a href="https://www.hackerschool.com/blog/60-23-hacker-schoolers-and-residents-on-their-experiences-at-hacker-school">elsewhere on the internet</a>.</p>

<p>The reviews mention the friendly environment, curious peers with a breathtakingly wide variety of skills and interests, the fanatical focus on projects that push deeper understanding, and the profound intellectual transformation of the experience.</p>

<p>The advice to new admits, <a href="https://medium.com/hacker-school/how-to-get-the-most-out-of-hacker-school-ab08782397f8">including mine,</a> generally also addresses the structureless nature of the program: there is no curriculum, no set goals, no staff of &#8216;teachers&#8217; to tell you what to learn each morning. Many people find this daunting, and in many &#8216;end of batch&#8217; recap blog posts I see people regretting that they didn&#8217;t &#8216;figure out&#8217; how to navigate this until late in the batch and lament the &#8216;wasted time.&#8217;</p>

<p>But <em>the discomfort and the time spent floundering are precisely the point. </em>They are what makes Hacker School so valuable for you, long after you walk out the door on your last day.</p>

<p>In the space between the step-by-step beginner tutorial and your little project that ends up on the top of Hacker News is where you have to find the path for yourself. In the outside world, in your job, in your side project time, in the hours left in your life, who is going to tell you what path to follow and put a curriculum in front of you each day? To make a real difference and push the human race forward, you have to learn to blaze trails into the unknown, pick up new skills quickly, and <em>decide for yourself</em> what to learn next.</p>

<p>Hacker School does this by getting out of your way. They create a hyperbaric chamber for learning by fanatical obsession with the perfect environment. They pick curious and generous peers, hire thoughtful and energetic facilitators, remove extrinsic motivators like interview preparation as much as they can and then they <em>get the hell out of your way.</em></p>

<p>They let you chart your own course, even if that means a little floundering as <em>the floundering is an essential part of this learning.</em> You are figuring out what excites you. How to balance the lure of  the new and shiny with the need to buckle down and polish core skills. How to explore when you have no idea what lies ahead. How to use source code and fellow programmers for help when you don&#8217;t understand. And how to tell when you have wrung the last bit of learning and enjoyment out of a project.</p>

<p>Figuring out how to chart this path for yourself is much harder back out in the world where you are faced with distractions and uncurious peers, unhelpful or non-existent mentors, pressure to ship uninteresting code for other people, and bills to pay. A 3-month gap where you can pursue anything that interests you is a breath of fresh air, and in that ideal environment have a very real shot at learning how to learn.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Thanks, PyData!]]></title>
    <link href="http://sursh.github.com/blog/2014/11/22/thanks/"/>
    <updated>2014-11-22T13:41:00-05:00</updated>
    <id>http://sursh.github.com/blog/2014/11/22/thanks</id>
    <content type="html"><![CDATA[<p>I just gave a talk at PyData NYC to an absolutely fantastic audience. <a href="http://sursh.github.com/talks/data-audit/">The slides, links, and books I recommended are here</a>.</p>

<p>I&#8217;m really curious to hear your war stories, questions, which parts of the talk helped, everything! Please feel free to reach out to my by <a href="http://twitter.com/sashalaundy">Twitter</a> or <a href="mailto:sasha.laundy@gmail.com">email</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Our Talk at Strata]]></title>
    <link href="http://sursh.github.com/blog/2014/10/21/our-talk-at-strata/"/>
    <updated>2014-10-21T10:11:00-04:00</updated>
    <id>http://sursh.github.com/blog/2014/10/21/our-talk-at-strata</id>
    <content type="html"><![CDATA[<p>Last week I attended O&#8217;Reilly&#8217;s data conference, Strata. I had a great time, including  co-presenting with my colleague <a href="http://shron.net">Max Shron</a> on the topic of <a href="http://strataconf.com/stratany2014/public/schedule/detail/36730">Solving the Right Problem</a>.</p>

<p>Based off the material in <a href="http://shop.oreilly.com/product/0636920029182.do">his book</a>, we argued that it is easy to crunch some numbers and feel like you&#8217;re doing data science, but in the end to come up empty-handed since you didn&#8217;t pick the right problem in the first place. This is a particular danger since data scientists love data and programming and the latest tools, so it can be very tempting to just dive into the data set without first considering where you&#8217;ll end up.</p>

<p>We looked to the design world as a case study for how other disciplines have handled this very same problem, and propose that it&#8217;s not enough to be technically and mathematically competent. Effective data scientists must also be skilled at drawing out the <em>actual need</em> from underneath the <em>stated need</em>.</p>

<p>The second half of the talk, where we lay out a framework for structuring scope conversations, was drawn from previous talks Max has given. This iteration of the talk saw two new things. First, I added more justification and urgency around why you should care about doing this well. I imagine that everyone who chose to be in our session already believes this, but chances are extremely good that there are <em>other people</em> in their organization that are skeptical. Hopefully our arguments are portable enough that attendees can persuade their coworkers and managers.</p>

<p>The second thing I added were symptoms of scoping poorly. Just as it&#8217;s difficult to see that you&#8217;re in the Matrix when you&#8217;re in it, it&#8217;s difficult to know that you&#8217;re bad at scoping when you&#8217;re bad at it. The presentation has four red flags so you can spot weak scoping and have the language to address it. The nice thing about these is that once you give them a name, everyone on your team is more likely to spot them and call them out.</p>

<p>O&#8217;Reilly is working on the video and we are working on the annotated slides. I&#8217;ll update this post when they&#8217;re out. In the meantime, please enjoy this totally unrelated visualization of the most popular American names over time:</p>

<iframe src="http://giphy.com/embed/5xtDarJpumZXFpm3tf2?html5=true" width="480" height="303" frameBorder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<p>I spent most of the rest of the conference on the &#8220;hallway track&#8221; meeting new folks and catching up with colleagues from around the world. The sessions look <em>awesome</em> and I bookmarked a bunch of them to watch later. Literally too many to list right now. Will pare them down the list for the next post.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[I'm switching to vim]]></title>
    <link href="http://sursh.github.com/blog/2014/08/27/switching-to-vim/"/>
    <updated>2014-08-27T09:31:00-04:00</updated>
    <id>http://sursh.github.com/blog/2014/08/27/switching-to-vim</id>
    <content type="html"><![CDATA[<p>I should really have switched to vim ten years ago when I first started using the command line. But vim has a hell of a hill to get over, and I never made it high enough to keep going. I&#8217;m revisiting it because I love keyboard shortcuts! Once they&#8217;re in your brain, you hardly have to think to move the whole program around at a blazing speed. Then you get to feel like a wizard.</p>

<p>Starting August 1, I deleted my symlink to <code>subl</code> and went cold turkey. It&#8217;s slowed me down pretty significantly, but that&#8217;s been a great incentive to set aside time every day to learn new vim stuff, and investing in the tools you use all day every day is always a great investment. I still feel pretty clumsy, but I now find myself editing non-code things in vim! Which is a good sign!</p>

<h2>Resources I&#8217;m Using</h2>

<ul>
<li><p>I&#8217;ve been working my way through <a href="http://www.amazon.com/Practical-Vim-Thought-Pragmatic-Programmers/dp/1934356980/">Practical Vim</a>, which is great at getting you <em>thinking</em> in the vim way. I suspect this will make me effective much faster than just googling for things as they come up.</p></li>
<li><p>When I want to look something up on the fly, Google usually points me to the <a href="http://vim.wikia.com/wiki/">Vim tips wiki</a>, which is <em>encyclopedic</em> for one-off solutions and quick fixes, even if they&#8217;re not well contextualized.</p></li>
<li><p>I&#8217;ve been pestering my colleagues, developer friends, and other Hacker School folks for their favorite config and tips and tricks, which has been very fruitful.</p></li>
</ul>


<p>ALSO, I bought the domain thedailyvim.com, and am considering setting up a daily tips feed there. <a href="https://twitter.com/SashaLaundy">Send me a tweet</a> if that&#8217;s something you&#8217;d be interested in!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[HOWTO force all Django users to log out with the Django ORM]]></title>
    <link href="http://sursh.github.com/blog/2014/08/26/howto-force-all-django-users-to-log-out-with-the-django-orm/"/>
    <updated>2014-08-26T09:42:00-04:00</updated>
    <id>http://sursh.github.com/blog/2014/08/26/howto-force-all-django-users-to-log-out-with-the-django-orm</id>
    <content type="html"><![CDATA[<p>I recently hit a bug with <a href="http://blaggregator.us">Blaggregator</a>, a Django app I&#8217;m running in production on Heroku, and the fix needed each user to log out and then log back in for it to take effect.</p>

<p>So how to log out all users at once? A bunch of threads around the internet suggested deleting the Session table, as that stores all session information for users (that they are logged in, shopping cart info, etc). That&#8217;s easy enough with the <code>dbshell</code>, but I&#8217;m hitting a weird psql bug on Heroku that I don&#8217;t have time to diagnose, and plus, working directly in the dbshell makes me feel icky. So here&#8217;s how to force all Django users to log out on your Heroku-backed app using the ORM, which is one layer of abstraction farther from shooting yourself in the foot.</p>

<p><em>Be careful</em> since this can have adverse effects for your customers (remove items in a shopping cart, etc). It will also confuse and annoy visitors who are currently on your site. There are more graceful ways to accomplish this, but in my case it was quick and effective. I&#8217;m not storing anything important in the Session for Blaggregator, and the site has &lt; 1,000 users as it&#8217;s constrained by the total size of the Hacker School alumni population. That&#8217;s a small enough number that none of them were on the site yesterday early morning when I was deploying. So this was a quick and dirty way to deploy the fix and make sure it was applied.</p>

<p>To get started, fire up the Heroku Django shell:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>heroku run python manage.py shell
</span></code></pre></td></tr></table></div></figure>


<p>When you get the Django shell prompt (<code>&gt;&gt;&gt;</code>), then you can import the Session model. (If you want to go read the code, the module name tells you where to look: <em>django.contrib.sessions</em>.<strong>models</strong> looks in your virtualenv&#8217;s lib/python2.7/site-packages/<em>django/contrib/sessions/</em> for <strong>models</strong>.py)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt;&gt;&gt; from django.contrib.sessions.models import Session
</span></code></pre></td></tr></table></div></figure>


<p>Now, you can iterate through all the Session objects and delete them. (caution!)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt;&gt;&gt; <span class="k">for </span>s in Session.objects.all<span class="o">()</span>:
</span><span class='line'>...   s.delete<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or, as <a href="https://twitter.com/jacobian/status/504272832231395328">Jacob Kaplan-Moss pointed out</a>, if you delete them straight from that queryset, you not only win at code golf, but the query will be faster due to how Querysets work under the hood:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt;&gt;&gt; Session.objects.all<span class="o">()</span>.delete<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>See our <a href="https://twitter.com/jacobian/status/504272832231395328">Twitter conversation</a> or the Django docs if you want more info on Querysets.</p>

<p>Congradulations!  Your site is now very lonely.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Slacker Developer's Guide to the Mavericks Upgrade]]></title>
    <link href="http://sursh.github.com/blog/2014/05/14/the-slacker-developers-guide-to-the-mavericks-upgrade/"/>
    <updated>2014-05-14T22:00:00-04:00</updated>
    <id>http://sursh.github.com/blog/2014/05/14/the-slacker-developers-guide-to-the-mavericks-upgrade</id>
    <content type="html"><![CDATA[<p>I am not an early adopter.</p>

<p>Until last week, I was running 10.7. Yes, it&#8217;s true. Don&#8217;t judge. I had code to ship. No time for yak shaving!</p>

<p>But finally I bit the bullet. After dual redundant spatially-distributed backups, I ran the upgrade. And everything went great at the GUI level! And the Messages app is awesome! But Ruby, virtualenv, and Java were all borked. I don&#8217;t even Ruby, but I use Octopress and Heroku, so I couldn&#8217;t even blog or restart Hubot. Sadness!</p>

<p>Some tips in your upgrade:</p>

<ol>
<li><p>Homebrew links will probably be messed up. <code>brew unlink foo</code> and then <code>brew link foo</code> fixed most of these. Consider scripting it to save time and heartache! E.G. <code>for i in $( brew list ); do brew unlink $i; brew link $i; done</code></p></li>
<li><p>Ruby has a new version, and RVM is now using <code>.ruby_version</code> instead of <code>.rvmrc</code> to keep track of Ruby versions. It automatically moved these files around without telling me, which is half of what broke my blog.</p></li>
<li><p>Ruby 2.whatever will complain about Readlines or Yaml or OpenSSL depending on its mood. Try uninstalling Ruby with RVM, installing whatever it demands, and then reinstalling Ruby and seeing if it works. At this point, I&#8217;m basically thinking of Ruby as a demanding newborn that is astonishingly articulate about its needs.</p></li>
<li><p>Java is gone because reasons. <a href="http://osxdaily.com/2013/11/01/install-java-os-x-mavericks/">Here&#8217;s how to reinstall it</a>.</p></li>
<li><p>I&#8217;m still not sure what&#8217;s going on with my virtualenv but I think it has to do with my questionable decision to use a third-party Python distro. Passing in a path to the system Python with <code>-p</code> seems to be a decent workaround.</p></li>
<li><p>A bunch of packages wouldn&#8217;t install through pip, and it turns out that the new default when flags are not recognized by gcc is to CATASTROPHICALLY CRASH rather than keep calm and carry on. Don&#8217;t have time for this drama? Add the following to your environment:</p></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">export</span> <span class="n">CFLAGS</span><span class="o">=-</span><span class="n">Qunused</span><span class="o">-</span><span class="n">arguments</span>
</span><span class='line'><span class="n">export</span> <span class="n">CPPFLAGS</span><span class="o">=-</span><span class="n">Qunused</span><span class="o">-</span><span class="n">arguments</span>
</span></code></pre></td></tr></table></div></figure>


<p>Back to work!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Unexpected Lessons from ORDCamp: Unstructure is the Best Structure]]></title>
    <link href="http://sursh.github.com/blog/2014/01/26/unexpected-lessons-from-ordcamp/"/>
    <updated>2014-01-26T17:35:00-05:00</updated>
    <id>http://sursh.github.com/blog/2014/01/26/unexpected-lessons-from-ordcamp</id>
    <content type="html"><![CDATA[<p>I had the pleasure of spending the weekend attending <a href="http://ordcamp.com">ORDCamp</a> in Chicago. It&#8217;s an unconference bringing together a wide range of artists, founders, engineers, educators, writers, and even a couple of beekeepers. I learned so many things I expected to learn (cool new ideas, tools, and stories) but the overall Gestalt experience brought several unexpected realizations.</p>

<p><img class="center" src="http://f.cl.ly/items/2K1E3F0t1V1G2z3p0V2G/2014-01-25%2021.20.17.jpg" title="FROM ordcamp SELECT *" alt="The whole crowd at the closing session."></p>

<p>This is my fifth or sixth unconference. This format bring together people around some common philosophy or topic. Unlike a conference, there is no content set ahead of time. <strong>No confirmed talks, no pre-arranged speakers</strong>. The attendees construct the schedule together on the first night. This works way better than you&#8217;d think.</p>

<p>Session leaders are not necessarily even experts in their topic. It&#8217;s perfectly acceptable to just start a session around a question you have been pondering, creating a space for an interesting discussion. I ran a session called &#8220;Training Animals (and Humans) for Fun and Profit.&#8221; I&#8217;m not an animal trainer and I&#8217;ve never had a pet. A <a href="http://www.amazon.com/Dont-Shoot-Dog-Teaching-Training/dp/0553380397/">dog training book</a> [1] changed the way I think about parenting, strengthening relationships, software user interfaces, and how to change my own habits. I wanted to share what I&#8217;d learned.</p>

<p>Sessions don&#8217;t have to even be about ideas. One of the more popular sessions was watching someone play the video game Spelunky. Others were more hands on. I&#8217;m particularly sad I missed Flaming Nunchucks, which was exactly what it sounds like.</p>

<p>One reason this format works so well is that it creates <strong>just enough structure</strong>. Organizers make sure social norms and expectations are clear, give advice on how best to navigate the experience, and then put the content squarely in the hands of the attendees. This works so well precisely because there is a void to fill. If you don&#8217;t step up and offer something interesting to the community it&#8217;s going to be a pretty boring day. It puts people in a <strong>contributor mindset</strong>, which changes everything.</p>

<p>At normal conferences, you can really phone it in. Sit in the back, half-listen to the sage on the stage, flip through Twitter, hang out with people you already know. But at well-run unconferences, opportunities to engage feel precious and fleeting. You want to attend every session and meet <em>everyone</em>.</p>

<p>At the intro session, organizers Fitz and Zach encouraged us to settle in, &#8220;carefully place your stuff precisely anywhere&#8221; and lay off the tweeting and posting to indulge in a weekend for ourselves. I left my laptop and phone in my bag the whole weekend. I knew it would help my focus, but I didn&#8217;t expect it to so radically improve my energy level. Instead of sliding into Twitter or email when I had a down moment, I had time to be thoughtful: to say hello, ask a question, get some water, or play Chopsticks on a musical Tesla coil. Twitter and email feel stimulating but are actually shallow and exhausting: <strong>aspartame for the mind</strong>.</p>

<p>When we felt the urge to check our phones, organizers and ORDCamp veterans enouraged us to see that as a sign to get up and leave the session we were in and explore others. Making it socially acceptable to say &#8216;no&#8217; politely and find something that&#8217;s a better fit for you <strong>isn&#8217;t disrespectful</strong>. Quite the opposite: you get a better session, and the other folks in the room get engaged, excited partners. [2]</p>

<p>The other piece of unexpected advice came from ORDCamp veteran Bill. <strong>&#8220;Choose the session you&#8217;re least interested in.&#8221;</strong> I couldn&#8217;t resist the interesting sessions for the first few rounds, for the 5pm slot I chose The Art and Science of Smoking Pigs. I&#8217;m never going to have the space to do it myself, and how much could there possible be to say about pig roasting?</p>

<p>Moshe blew me away. He&#8217;s spent years refining his barbeque technique, and showed us the science, art, and culture that went into the best barbeque I&#8217;ve ever had. Not only that, but he fed us rib tips and barbeque sauce-covered Cap&#8217;n Crunch. And he brought a blow torch and charred up a few different wood samples so we could get a sense for the different smoke flavors.</p>

<p>Luck surface area [3] is an immensely useful concept. Bill&#8217;s advice was essentially to increase my <strong>serendipity surface area</strong>, exposing myself to ideas that perhaps weren&#8217;t interesting because I just hadn&#8217;t seen them in the right light before. [4] I&#8217;ll certainly never see barbeque the same way again.</p>

<p>Unconferences in general are all about increasing serendipity surface area. They are just enough structure to create an amazing skeleton, and then get out of the way and allow the incredible brains in the room to fill the space deliberately left empty. It&#8217;s a structure that gets out of the way.</p>

<p>Hacker School is such a radically efficient educational experience for exactly the same reason. In some sense, it&#8217;s a 12-week-long unconference with ad-hoc one-to-two person sessions. It&#8217;s a school that gets out of the way of your learning. This is also why I chose an unstructured hack night as the first format for <a href="http://womenwhocode.com">Women Who Code</a>. The group simply a social platform to bring together phenomenal people and then get out of their way so they can build the code and relationships that they need.</p>

<p>The most surprising thing I&#8217;m taking with me is perspective on my daily life. NYC hardens you around the edges quickly. There&#8217;s so much noise and hubbub to filter out, and so many people demanding your time, attention, and money. With world-class everything, it&#8217;s easy to slip into casual jadedness. Seeing people share their excitement and passion for beekeeping and parenting and schools and tattoos and nunchucks and games and sousaphones, I couldn&#8217;t remember the last time I was that viscerally <em>excited</em> about something. I want to put that feeling in a jar and keep it with me in the big city.</p>

<p>I&#8217;ll let you know how it goes. In the meantime, get yourself to an unconference. Or make your own.</p>

<p>[1] Recommended to me by habit formation expert <a href="http://www.bjfogg.com/">BJ Fogg</a>, whose work has also been immensely useful.</p>

<p>[2] This is also great relationship advice.</p>

<p>[3] Luck surface area means increasing the opportunities you have to be lucky, either by increasing your exposure to opportunity or by preparation to take advantage of it when it comes around.</p>

<p>[4] Someone&#8217;s offhand comment on Friday gave me a great new metaphor: <strong>ant trails</strong>. Ants wander around exploring somewhat randomly. As they go, they lay down trails of pheremones. When other ants come across these trails, they follow them. In short order, the entire workforce are no longer exploring, just trucking food back and forth on established trails. It&#8217;s the best way to efficiently keep their colony fed&#8230;at the expense of exploration. It&#8217;s very easy to go to sessions in your wheelhouse. Bill&#8217;s advice got me out of my ant trails.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Blaggregator now has comments!]]></title>
    <link href="http://sursh.github.com/blog/2013/06/11/hacker-school-slash-s-blaggregator-now-has-comments-slash/"/>
    <updated>2013-06-11T15:40:00-04:00</updated>
    <id>http://sursh.github.com/blog/2013/06/11/hacker-school-slash-s-blaggregator-now-has-comments-slash</id>
    <content type="html"><![CDATA[<p>We were having some great conversations about fellow Hacker Schoolers&#8217; blog posts in Humbug, but that channel is too high-volume for most alums.</p>

<p>Enter: Comments! The Hacker School community can now privately discuss blog posts in a pretty interface with a high signal-to-noise ratio. <a href="http://blaggregator.herokuapp.com">Check it out</a> (Hacker School login required).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Get the Most out of Hacker School]]></title>
    <link href="http://sursh.github.com/blog/2013/05/30/how-to-get-the-most-out-of-hacker-school/"/>
    <updated>2013-05-30T18:52:00-04:00</updated>
    <id>http://sursh.github.com/blog/2013/05/30/how-to-get-the-most-out-of-hacker-school</id>
    <content type="html"><![CDATA[<p>Monday is the first day of the summer batch of <a href="http://hackerschool.com">Hacker School</a>. You and about 70 other bright-eyed and bushy-tailed programmers will be starting twelve amazing weeks together.</p>

<p>In addition to the excellent advice that Dave and Nick will give you on day one, here are some ideas to help you get the most out of this awesome experience.</p>

<p><a href="https://medium.com/i-m-h-o/ab08782397f8/">Read the rest of the post on Medium&#8230;</a></p>

<!--
## Know what you want
You are in Hacker School because you love programming and want to get radically better, but what does that mean, exactly? What skills do you want to leave with? Do you want to go in depth on the fundamentals? Learn a new class of languages? Get comfortable writing bigger apps?

If you don’t have this figured out on day one, that’s OK, but move aggressively to figure it out so you know what projects to pick. Ask other people what they’re working on. Talk to a facilitator. No one will hand you a roadmap here, but they will help you write your own if you ask.

## Maximize your learning per hour
Hacker School is this weird wonderful oasis in your life trajectory where you have no deliverables and no responsibilities to ship code for someone else. Your top priority is becoming a better programmer, so make decisions that maximize your learning per hour (LPH).

Pick projects you have no idea how to do. Investigate non-critical but interesting bugs. Get enough sleep, install Self Control, or do whatever you need to do to sit down and just start coding. Twelve weeks is short. Use each day wisely.

## See the forest for the trees
There’s so much happening every day at Hacker School that it is easy to get caught up in a project that drags on for too long. When your LPH gets low, wrap up the project. It doesn’t have to be done for you to be done with it.

Three months is really short, but that word “months” is just heavy enough that you feel like you have all the time in the world, so it’s easy to take your time and move slowly. Set up smaller milestones—every two weeks worked nicely for me—and check in. Are you where you wanted to be after two weeks? Keep your eye on the big picture.

## People are amazing resources
A wonderful thing about Hacker School is the diversity. And I don’t just mean 35% women, 25% people of color, and 15% international folks, even though those numbers are astounding in the technical community.

Hacker School brings together people who are all at a crossroads in their life. You are united by loving programming and wanting to get better at it, but other than that everyone is all over the map. Some have been programming professionally for years. Some have been working in international espionage. Some love kiteboarding. Some have startup experience, others have worked at big companies. Find out what the people around you know and ask them lots and lots of questions.

That goes for the residents too. Google them before they arrive to get some good question ideas. When they arrive, they’ll be eager to pair and talk about code, but also happy to share the story of their life’s work.

Don’t just limit this to Hacker School. Talk actively to the programmers in your life about what you’re working on. They’ll have an interesting perspective. No programmers in your life yet? Go to meetups in NYC and say hi. If you meet someone you like, get their info and keep in touch with them.

## All feedback all the time
Get all your code reviewed. Ask for feedback on your presentations. Check that you chose a good project before you get started. Ask for suggestions from the people you pair with. You won’t get this unless you ask for it, and if you ask you will get better so, so much faster.

If you don’t come away from the conversation with something concrete to change or try differently next time, invite them to be brutally honest. They may be holding back to spare your feelings! We, as a society, suck at teaching people to give negative feedback in a supportive way and it makes a lot of people nervous.

Above all: have fun, learn lots, and never graduate.

-->

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git + Autocomplete = Bliss]]></title>
    <link href="http://sursh.github.com/blog/2013/04/01/autocomplete-in-git/"/>
    <updated>2013-04-01T18:39:00-04:00</updated>
    <id>http://sursh.github.com/blog/2013/04/01/autocomplete-in-git</id>
    <content type="html"><![CDATA[<p><strong>Did you know that you can turn on autocomplete for git?</strong> A quick survey of other Hacker Schoolers turned up that most Linux distros come with this built in, but most Mac users didn&#8217;t have it installed.</p>

<p><img src="http://i2.kym-cdn.com/entries/icons/original/000/000/248/underpants.jpg" title="Underpants Gnomes Business Plan" ></p>

<ol>
<li>Streamline your tools</li>
<li>Save time</li>
<li>Profit!</li>
</ol>


<p>It&#8217;s super easy. Put <a href="https://github.com/git/git/blob/master/contrib/completion/git-completion.bash">git&#8217;s autocomplete script</a> in your home directory. Then add it to your .bashrc by running <code>source ~/.git-completion.bash</code>.</p>

<p>There&#8217;s more detail <a href="http://git-scm.com/book/en/Git-Basics-Tips-and-Tricks">here</a>, along with aliases, which are a MUST. I added <code>git unstage FILENAME</code> which I find much more intuitive than <code>git reset HEAD -- FILENAME</code>. Hooray!</p>

<p>Part of my morning routine here at <a href="http://hackerschool.com">Hacker School</a> is learning a few new things about Python, bash, and git, since in the long run, <strong>knowing these tools like the back of my hand saves tons of time</strong>.</p>

<p>Let me know on <a href="http://twitter.com/sashalaundy">Twitter</a>/Humbug if you want to hear more about this routine.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Demo code review]]></title>
    <link href="http://sursh.github.com/blog/2013/03/26/demo-code-review/"/>
    <updated>2013-03-26T17:35:00-04:00</updated>
    <id>http://sursh.github.com/blog/2013/03/26/demo-code-review</id>
    <content type="html"><![CDATA[<p>A big part of life at <a href="http://hackerschool.com">Hacker School</a> is code reviews. Sometimes facilitators review code but for the most part, it&#8217;s our super talented peers.</p>

<p><strong>Getting reviewed is really valuable to accelerate learning.</strong> It points unclear parts of your code, and blind spots you didn&#8217;t know you had. In some of my projects I&#8217;ve implemented things in a brute-force way, and my reviewers have pointed me to data structures or libraries I hadn&#8217;t yet discovered that allowed me to cut out lots of code.</p>

<p><img class="left" src="http://f.cl.ly/items/2V2t1y39271F1b3k0B3D/2013_03_25_codereview.JPG" title="Code review session" alt="A picture of our code review session."></p>

<p>Today Allison (a facilitator) offered a demo code review, so we could see how she thinks about a code review. We went over a Lisp implemented in Python written by <a href="https://twitter.com/nycgwailou">Nick</a>.</p>

<p>The crowd watching was pretty diverse, so everyone took something different away. Some learned about Python, some about the Git workflow, and some about Lisps.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[On Rakefiles and Rabbit Holes]]></title>
    <link href="http://sursh.github.com/blog/2013/03/25/on-rakefiles-and-rabbit-holes/"/>
    <updated>2013-03-25T15:34:00-04:00</updated>
    <id>http://sursh.github.com/blog/2013/03/25/on-rakefiles-and-rabbit-holes</id>
    <content type="html"><![CDATA[<p><strong>TL;DR.</strong> I noticed a bug in Octopress. In fixing it, I found a separate, truly spectacular error, and learned a lot of interesting things about bash. I would never have learned so much outside of Hacker School, since it gives me the time and space to open up the box.</p>

<h2>The original bug.</h2>

<p>Octopress&#8217; <code>rake preview</code> lets you preview your post in the browser before deploying. It spawns Rack to serve local requests and Guard to watch for file changes. Guard in turn spawns Fsevent to do the actual watching.</p>

<figure class='code'><figcaption><span>Handy pstree is handy.</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pstree
</span><span class='line'>...
</span><span class='line'> | | <span class="se">\-</span>+<span class="o">=</span> 31340 root login -pf sasha
</span><span class='line'> | |   <span class="se">\-</span>+<span class="o">=</span> 31341 sasha -bash
</span><span class='line'> | |     <span class="se">\-</span>+<span class="o">=</span> 31430 sasha ruby /.../ruby-1.9.3-p374/bin/rake
</span><span class='line'> | |       |-+- 31433 sasha ruby /.../ruby-1.9.3-p374/bin/gua
</span><span class='line'> | |       | <span class="se">\-</span>-<span class="o">=</span> 31443 sasha /.../ruby-1.9.3-p374/gems/rb-fs
</span><span class='line'> | |       <span class="se">\-</span>-- 31434 sasha <span class="o">(</span>ruby<span class="o">)</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>But when you <code>crtl-C</code>, Fsevent stays running in the background until you <code>kill</code> it or modify a file in the watched dir. This throws a <code>TCPServer Error</code> if you try to run <code>rake preview</code> a second time. Sad pandas.</p>

<p>Initially I had no idea what was going on here. I&#8217;ve dabbled in Ruby but not modified a Rakefile before. I learned <code>ps</code> and <code>kill</code> ten years ago, but didn&#8217;t know much about what was going on under the hood. Ripe conditions for learning a ton.</p>

<p><strong>This is what I love about Hacker School</strong>. I have the time and space to go down these rabbit holes. At a startup, priority goes to shipping code. <strong>Here, shipping code is the means, not the end.</strong></p>

<p>In the end, the actual bug was pretty small: when you interrupt <code>rake</code>, it passes <code>kill 9</code> to guard. Guard ends itself but doesn&#8217;t properly terminate its child process fsevent`.</p>

<figure class='code'><figcaption><span>Rake preview catching interrupts</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">trap</span><span class="p">(</span><span class="s2">&quot;INT&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="o">[</span><span class="n">guardPid</span><span class="p">,</span> <span class="n">rackupPid</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">pid</span><span class="o">|</span> <span class="no">Process</span><span class="o">.</span><span class="n">kill</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">rescue</span> <span class="ss">Errno</span><span class="p">:</span><span class="ss">:ESRCH</span> <span class="p">}</span>
</span><span class='line'>    <span class="nb">exit</span> <span class="mi">0</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This can be duct-taped together by sending <code>3</code> (QUIT) instead of <code>9</code> (KILL) to Guard, but we&#8217;re asking the Guard team if this is a known issue. But it gets better!</p>

<h2>Curiouser and curiouser</h2>

<p>Things got <em>really</em> weird when I was playing around with the different exit codes. The Ruby documentation says that if you pass <code>kill</code> a negative argument, it will kill the entire group of processes, not just the child process. Promising!</p>

<p>However, it broke very spectacularly. If you want to follow along, grab the development branch of Octopress, currently 2.1:</p>

<pre><code>$ git clone -b 2.1 https://github.com/imathis/octopress.git
</code></pre>

<p>Find the <code>preview</code> task and change the message it passes on interrupt from 9 to -3:</p>

<figure class='code'><figcaption><span>Line 161 as of this writing</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">trap</span><span class="p">(</span><span class="s2">&quot;INT&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="o">[</span><span class="n">guardPid</span><span class="p">,</span> <span class="n">rackupPid</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">pid</span><span class="o">|</span> <span class="no">Process</span><span class="o">.</span><span class="n">kill</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">rescue</span> <span class="ss">Errno</span><span class="p">:</span><span class="ss">:ESRCH</span> <span class="p">}</span>
</span><span class='line'>    <span class="nb">exit</span> <span class="mi">0</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then run <code>rake preview</code> (you will have to run <code>rake install</code> the first time). Wait until you see Guard&#8217;s prompt (powered by Pry):</p>

<pre><code>16:10:05 - INFO - Guard is now watching at '/Users/sasha/code/octopress'
[1] guard(main)&gt; 
</code></pre>

<p>Then Control-C. You will see some lines of error output, and then BOTH guard and bash&#8217;s prompt, instead of one or the other. Wat!</p>

<pre><code>[2] guard(main)&gt; SASHAs-MacBook-Air-2:octopress sasha$ 
</code></pre>

<p>Weird! Press any key that sends input. PRY EXPLODES. Press enter and you get a bash prompt back, but now you can&#8217;t see anything you type. It&#8217;s still getting to bash (try <code>ls &lt;enter&gt;</code>) but some things, like control-L, no longer work.</p>

<p>Lolwut?</p>

<h2>Down the rabbit hole</h2>

<p>So I started reading about <a href="http://www.linusakesson.net/programming/tty/">TTY</a> and <a href="http://en.wikipedia.org/wiki/Unix_signal">POSIX signals</a> and using <a href="http://unixhelp.ed.ac.uk/CGI/man-cgi?stty">stty</a>. Interesting stuff, particularly the history of our terminal evolving from ticker tape outputs.</p>

<p>You can also change all sorts of wacky things about your terminal with <code>stty</code>. Try <code>stty -echo</code> (<code>stty echo</code> to undo it). This explains why I wasn&#8217;t able to see my own typing after the Pry explosion - when control was reluctantly handed back to bash, the flags on my terminal weren&#8217;t properly reset, including the flag to use raw (non-canonical) input processing, which is why it won&#8217;t process things like <code>control-l</code> until you hit enter.</p>

<p>I didn&#8217;t find all the answers in my reading, but I&#8217;m asking <em>significantly</em> better questions:</p>

<ul>
<li><p>How groups are being used is unclear. I expected the process group to inherit its gid from the parent process and to be killed cleanly by passing a negative argument to <code>kill</code>, but that didn&#8217;t work. Passing <code>-3</code> kills Rack but only mortally wounds Guard.</p></li>
<li><p>One remaining mystery: why is the bash prompt printed to the terminal after the Guard prompt when Guard is still running? Maybe control is passed from Guard to bash and then back to Guard?</p></li>
<li><p>It seems that Pry is getting something unexpected from its stdin, which triggers its explosion, which may or may not be coming from bash. But how to intercept it?</p></li>
<li><p>The Readlines library defines some bash shortcuts, like mapping <code>ctrl-l</code> to <code>clear</code>, but lets you override them with an .inputrc. So you can do awesome things to your prompt like adjusts how <code>ctrl-w</code> works. There are also vim and emacs modes for bash.</p></li>
</ul>


<p><strong>Stuff I learned:</strong> a little Ruby, Rakefiles, POSIX signals, the history of TTY, more about stdin, stdout, and stderr, stty, working with pids, gids, and the Process module in Ruby. And my first accepted (albeit one-character) pull request of Hacker School, which is certainly the highest learning-to-LOC ratio I can think of.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Turbocharging Octopress]]></title>
    <link href="http://sursh.github.com/blog/2013/03/11/turbocharging-octopress/"/>
    <updated>2013-03-11T19:05:00-04:00</updated>
    <id>http://sursh.github.com/blog/2013/03/11/turbocharging-octopress</id>
    <content type="html"><![CDATA[<p>This blog is powered by <a href="http://octopress.org/">Octopress</a>, which is basically a set of <code>rake</code> tasks, themes, and other add-ons generate a blog from Markdown posts. It&#8217;s in turn powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>.</p>

<p>The documentation is generally pretty good, but they didn&#8217;t really explain one fundamental thing. It&#8217;s pretty simple once you dig into the <code>Rakefile</code>, but here&#8217;s a quick explanation if you just want to get up and running.</p>

<h3>WTF is going on with the branches?</h3>

<p>On github, you will have two branches: <code>source</code> and <code>master</code>. But locally:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git br
</span><span class='line'>* source</span></code></pre></td></tr></table></div></figure>


<p>Huh. Interesting. Locally, you <em>only</em> have one branch: <code>source</code>.  Wat?</p>

<p>Basically, <code>source</code> holds your posts in Markdown and other files <em>before</em> they are transmogrified into HTML. Once you run <code>rake generate</code>, Octopress will generate all the HTML &amp; CSS and put it all in <code>/public</code>.</p>

<p>And when you run <code>rake deploy</code>, Octopress pushes the contents of <code>/public</code> (on <em>local</em> branch <code>source</code>) to the home directory (on <em>remote</em> branch <code>master</code>).</p>

<p>So: each time you finish a post, run BOTH <code>rake deploy</code> to deploy and <code>git push origin source</code> to back up your source files to github.</p>

<h3>Sublime Text &lt;3 Markdown</h3>

<p>So you&#8217;re writing your blog posts in Markdown like a boss. There are a few things you can do to make Sublime Text 2 a lean, mean blogging machine:</p>

<p><strong>Custom themes</strong>. For example, <a href="http://brettterpstra.com/2012/05/17/markdown-editing-for-sublime-text-2-humble-beginnings/">MarkdownEditing</a>, a series of custom themes and shortcuts for Markdown. (Hint: installing Package Control first will make this easier)</p>

<p><strong>Spell check.</strong>
Sublime Text 2 uses <a href="http://www.sublimetext.com/docs/2/spell_checking.html">Hunspell</a> for spell checking, the same library used in Word. This process was a bit more convoluted:</p>

<ol>
<li>Command-shift-p in ST2 to open Package Control</li>
<li>Choose &#8220;Add Repo&#8221;. Paste in <code>http://www.sublimetext.com/docs/2/spell_checking.html</code></li>
<li>Command-shift-p again. Choose &#8220;Install Package,&#8221; then &#8220;Dictionaries&#8221;</li>
<li>Find your preferences in Preferences > Package Settings > Markdown Editing > Markdown Settings - User</li>
<li>Add the following to the settings file:

<pre><code> "spell_check": true,
 "dictionary": "Packages/Language - English/en_US.dic"
</code></pre></li>
<li>Restart Sublime Text. Observe red squigglies when you edit Markdown.</li>
<li>Profit</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Crashing Heroku (or When Memory Management in Python Really Matters)]]></title>
    <link href="http://sursh.github.com/blog/2013/03/07/crashing-heroku-or-when-memory-management-in-python-really-matters/"/>
    <updated>2013-03-07T18:24:00-05:00</updated>
    <id>http://sursh.github.com/blog/2013/03/07/crashing-heroku-or-when-memory-management-in-python-really-matters</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/maxlikely">David</a> and I paired this week to build a <a href="http://www.codinghorror.com/blog/2008/06/markov-and-you.html">Markov chain generator</a>. It analyzes 15MB of old Hacker News headlines and generates completely new headlines that really sound like they came from HN. You can <a href="https://twitter.com/HackerNewsOrNot">follow the Twitter bot</a> or <a href="https://github.com/sursh/markov-hacker-news">check out the code</a>.</p>

<p><a href="http://blog.sashalaundy.com/blog/2013/03/05/help-us-plug-our-memory-leaks/">Last time</a>, we asked your advice on how to handle all possible trigrams in 15 MB of seed text - a task that took up about 1 GB of memory in our first implementation, rapidly blasting through Heroku&#8217;s limit of 512 MB. The culprit? <strong>Dictionaries.</strong></p>

<p>Our initial data structure was a dict of dicts. The key was a <em>bigram</em>, or word pair, and the value was a dict of all of the words that followed that bigram in the training text and the number of times they occured. Wat? Here&#8217;s an example:</p>

<figure class='code'><figcaption><span>Our initial data structure</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="p">(</span><span class="s">&#39;how&#39;</span><span class="p">,</span> <span class="s">&#39;to&#39;</span><span class="p">):</span> <span class="p">{</span> <span class="s">&#39;do&#39;</span><span class="p">:</span> <span class="mi">529</span><span class="p">,</span>
</span><span class='line'>                   <span class="s">&#39;grow&#39;</span><span class="p">:</span> <span class="mi">202</span><span class="p">,</span>
</span><span class='line'>                   <span class="s">&#39;know&#39;</span><span class="p">:</span> <span class="mi">134</span><span class="p">,</span>
</span><span class='line'>                   <span class="o">.....</span>
</span><span class='line'>                 <span class="p">},</span>
</span><span class='line'>  <span class="p">(</span><span class="s">&#39;to&#39;</span><span class="p">,</span> <span class="s">&#39;do&#39;</span><span class="p">):</span> <span class="p">{</span> <span class="s">&#39;the&#39;</span><span class="p">:</span> <span class="mi">1245</span><span class="p">,</span>
</span><span class='line'>                  <span class="s">&#39;everything&#39;</span><span class="p">:</span> <span class="mi">149</span><span class="p">,</span>
</span><span class='line'>                  <span class="o">.....</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>  <span class="o">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>With 15 MB of training text and so much redundancy, this can get out of hand quickly! Every word appears <em>at least</em> 3 times in the matrix, and some appear thousands of times.</p>

<h3>Possible solutions:</h3>

<ul>
<li><strong>Generators.</strong> for iterating over the headlines. This helped a lot - got us from 1.3 G down to about 850 MB.</li>
<li><strong>Compression.</strong> Tossing out common values, like <code>1</code> for the count of the long tail of words.</li>
<li><strong>Creative use of data types.</strong> E.G. storing words as <code>int</code>s instead of <code>string</code>s.</li>
<li><strong>Lists.</strong> They take up less memory than dicts. One variation that we tried (and is in <a href="https://github.com/sursh/markov-hacker-news/blob/e584ef95ade08f03a482debfc0c0f47adde67af3/trigrams.py">this version of our code</a>) is creating two dicts of lists rather than one dict of dicts.</li>
<li><strong>Trade memory for speed.</strong> Darius, a Hacker School alum, pointed us to <a href="http://stackoverflow.com/questions/327223/memory-efficient-alternatives-to-python-dictionaries/327295#327295">his Stack Overflow answer</a>, where he laid out a few other approaches that mainly trade memory usage for speed. Also, David dug up some recent papers that focus entirely on this problem. Researchers are currently doing some very clever algorithms to get the most out of their data structures.</li>
</ul>


<h3>So where did we leave it?</h3>

<p>Darius&#8217; suggestions and the approaches in the literature will certainly help reduce memory usage. We wanted to maximize learning per unit of time at Hacker School and didn&#8217;t think implementing these approaches teach us proportionally more than reading about them. We shipped it by deploying on a machine with more memory. Follow the Twitter bot <a href="https://twitter.com/HackerNewsOrNot">here</a>!</p>

<h4>Stuff I learned along the way:</h4>

<p> Generators, classes and methods in python, pickle, regex, defaultdict, Tweepy, Buffer&#8217;s API, how bad the built in titlecase methods are in Python, some clever way to handle default arguments, some fundamental principles of NLP.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Help us plug our memory leaks]]></title>
    <link href="http://sursh.github.com/blog/2013/03/05/help-us-plug-our-memory-leaks/"/>
    <updated>2013-03-05T00:08:00-05:00</updated>
    <id>http://sursh.github.com/blog/2013/03/05/help-us-plug-our-memory-leaks</id>
    <content type="html"><![CDATA[<p>David and I are running our app on Heroku, but it uses too much memory to run! <strong>Got any clever optimization suggestions?</strong></p>

<p>We&#8217;re building a Markov chain generator that is trained on a corpus of 15MB of old Hacker News headlines. The app currently indexes the training corpus and constructs a matrix of all the possibilities, then queries that matrix to generate a hopefully entertaining new headline. Preview it <a href="http://twitter.com/HackerNewsOrNot">here</a>.</p>

<p><strong>However, as we first wrote it, it used 1+ GB of memory when we deployed to Heroku, where the limit is 512 MB!</strong> We wrangled it down to 570 MB today and will tackle it again tomorrow morning, but need more ideas.</p>

<p>Some things we&#8217;ve tried:</p>

<ul>
<li>Pickling the matrix. Not pickling the matrix. (didn&#8217;t help)</li>
<li>Storing the words as <code>int</code>s in our matrix rather than <code>string</code>s (helped)</li>
<li>Tweaked the data structure (helped, could probably do more with this)</li>
<li>We ran out of time, but want to try some sort of data store. Redis?</li>
</ul>


<p><strong>What should we try next?</strong> Our code after the jump:</p>

<!-- more -->


<p>Very unfinished code:</p>

<figure class='code'><figcaption><span>The code + a few half-finished experiments </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">collections</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">string</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cPickle</span> <span class="kn">as</span> <span class="nn">pickle</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">twitterclient</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Markov</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>      <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="n">headline</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">intern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;\s+&#39;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()))</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">headline</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="k">del</span><span class="p">(</span><span class="n">headline</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="c"># clear lingering null entries</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">headline</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="k">del</span><span class="p">(</span><span class="n">headline</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>        <span class="k">yield</span> <span class="p">[</span><span class="s">&#39;^&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">headline</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;$&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">generateTrigrams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&#39;&#39;&#39; Create a list of tuples, where each tuple is a trigram &#39;&#39;&#39;</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tokens</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]):</span>
</span><span class='line'>      <span class="k">yield</span> <span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">tokens</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">tokens</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">generateMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&#39;&#39;&#39; Run through the list of trigrams and add them to the occurence matrix &#39;&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span> <span class="c"># load as pickle</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;matrix.p&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">except</span><span class="p">:</span> <span class="c"># interpret file as newline separated headlines</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">print</span> <span class="s">&#39;reading headlines&#39;</span>
</span><span class='line'>      <span class="n">headlines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">for</span> <span class="n">headline</span> <span class="ow">in</span> <span class="n">headlines</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">trigrams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generateTrigrams</span><span class="p">(</span><span class="n">headline</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">first_word</span><span class="p">,</span> <span class="n">second_word</span><span class="p">,</span> <span class="n">third_word</span> <span class="ow">in</span> <span class="n">trigrams</span><span class="p">:</span>
</span><span class='line'>          <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">first_word</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">))</span>
</span><span class='line'>          <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">second_word</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">))</span>
</span><span class='line'>          <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">third_word</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">trigrams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generateTrigrams</span><span class="p">(</span><span class="n">headline</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">first_word</span><span class="p">,</span> <span class="n">second_word</span><span class="p">,</span> <span class="n">third_word</span> <span class="ow">in</span> <span class="n">trigrams</span><span class="p">:</span>
</span><span class='line'>          <span class="n">first_word</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">first_word</span><span class="p">]</span>
</span><span class='line'>          <span class="n">second_word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">second_word</span><span class="p">]</span>
</span><span class='line'>          <span class="n">third_word</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">third_word</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>          <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span> <span class="p">(</span><span class="n">first_word</span><span class="p">,</span> <span class="n">second_word</span><span class="p">),</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
</span><span class='line'>          <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[(</span><span class="n">first_word</span><span class="p">,</span> <span class="n">second_word</span><span class="p">)][</span><span class="n">third_word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">print</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">itervalues</span><span class="p">())</span>
</span><span class='line'>      <span class="c">#print(&quot;DUMPING %d&quot; % len(self.matrix))</span>
</span><span class='line'>      <span class="c">#pickle.dump(self.matrix, open(&quot;matrix.p&quot;, &quot;wb&quot;))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">generateNextWord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prev_word</span><span class="p">,</span> <span class="n">current_word</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">conditional_words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span> <span class="p">(</span><span class="n">prev_word</span><span class="p">,</span> <span class="n">current_word</span><span class="p">)</span> <span class="p">]</span>
</span><span class='line'>    <span class="n">words</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">conditional_words</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># pick one of the possibilities, with probability weighted by frequency in training corpus</span>
</span><span class='line'>    <span class="n">cumcounts</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
</span><span class='line'>    <span class="n">coin</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">cumcounts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cumcounts</span><span class="p">):</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">item</span> <span class="o">&gt;</span> <span class="n">coin</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">words</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">generateParagraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed2</span> <span class="o">=</span> <span class="s">&#39;i&#39;</span><span class="p">,</span> <span class="n">seed1</span> <span class="o">=</span> <span class="s">&#39;^&#39;</span><span class="p">,):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">seed1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">seed1</span><span class="p">]</span>
</span><span class='line'>    <span class="n">seed2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">seed2</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">prev_word</span> <span class="o">=</span> <span class="n">seed1</span>
</span><span class='line'>    <span class="n">current_word</span> <span class="o">=</span> <span class="n">seed2</span>
</span><span class='line'>    <span class="n">paragraph</span> <span class="o">=</span> <span class="p">[</span> <span class="n">seed1</span> <span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">current_word</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;$&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraph</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">):</span>
</span><span class='line'>      <span class="n">paragraph</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_word</span><span class="p">)</span>
</span><span class='line'>      <span class="n">prev_word</span><span class="p">,</span> <span class="n">current_word</span> <span class="o">=</span> <span class="n">current_word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">generateNextWord</span><span class="p">(</span> <span class="n">prev_word</span><span class="p">,</span> <span class="n">current_word</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#paragraph = []</span>
</span><span class='line'>    <span class="n">paragraph</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">paragraph</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>  <span class="c"># strip off leading caret</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">string</span><span class="o">.</span><span class="n">capwords</span><span class="p">(</span><span class="n">paragraph</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>    <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">cfd</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
</span><span class='line'>      <span class="k">for</span> <span class="n">word2</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">cfd</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
</span><span class='line'>        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">: </span><span class="si">%d</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">s</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&#39;usage: ./markov.py inputFile&#39;</span>
</span><span class='line'>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">filename</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">m</span> <span class="o">=</span> <span class="n">Markov</span><span class="p">()</span>
</span><span class='line'>  <span class="n">m</span><span class="o">.</span><span class="n">generateMatrix</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class='line'>    <span class="n">tweet</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">generateParagraph</span><span class="p">(</span><span class="s">&#39;how&#39;</span><span class="p">)</span> <span class="c"># todo: new seed</span>
</span><span class='line'>    <span class="k">break</span>
</span><span class='line'>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">120</span><span class="p">:</span>
</span><span class='line'>      <span class="k">break</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">print</span><span class="p">(</span><span class="s">&quot;Tweeting </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">tweet</span><span class="p">)</span>
</span><span class='line'>  <span class="n">twitterclient</span><span class="o">.</span><span class="n">postTweet</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>  <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[In Search of Funny Gibberish]]></title>
    <link href="http://sursh.github.com/blog/2013/03/04/in-search-of-funny-gibberish/"/>
    <updated>2013-03-04T17:31:00-05:00</updated>
    <id>http://sursh.github.com/blog/2013/03/04/in-search-of-funny-gibberish</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/maxlikely">David</a> and I paired this week to build a bot that analyzes 15MB of old Hacker News and generates completely new headlines that really sound like they came from HN. You can <a href="https://twitter.com/HackerNewsOrNot">follow the Twitter bot</a> or <a href="https://github.com/sursh/markov-hacker-news">check out our code</a>.</p>

<h3>Inspiration</h3>

<p>I was inspired by <a href="http://www.linkedlistnyc.org/archive/issue_081.html">this Hacker News parody</a> and <a href="https://twitter.com/joedamarkov">this Twitter bot</a> to build a Markov chain generator as my warm-up project in Python.</p>

<h3>A lightweight introduction to Markov chain generators</h3>

<p>Markov chain generators are an interesting and dead simple way to generate a chain of anything - words, weather predictions, market simulations - anything that has happened before and can happen again.</p>

<p>The chain is generated by examining the current link in the chain, picking the next link based on what typically followed the first link in the training corpus. Then, it <em>completely forgets</em> about the initial link. It chooses the third link <em>only</em> based on what generally comes after the second link. And so forth.</p>

<p>So there is no history, no memory. The generator can switch between training sentences stochastically, so it can generate sentences that sound kind of like the original source, but don&#8217;t necessarily make any sense, and are hopefully funny.</p>

<h3>Bigrams vs trigrams</h3>

<p>The first design decision to make is how much history to examine when choosing a new link in your chain. If you only go one word back, you are looking at pairs of words, or <em>bigrams</em>.</p>

<p>Some sentences generated with bigrams: (please pardon that they&#8217;re all seeded with &#8216;why&#8217; - this is from an early branch)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Why I Am I Talk About To Be Designing For The Daily Check Out Of Braid Creating False
</span><span class='line'>Why Machines Is Right Fit
</span><span class='line'>Why Nokia Partners
</span><span class='line'>Why We Doing In Siberia
</span><span class='line'>Why Are Literally Amp Chrome Opera Singer Is Coming Soon
</span><span class='line'>Why The Twitter Besides Buying Groupon Will Not Good Freely Available To Effectively Off
</span><span class='line'>Why Objective C Safer In Gears
</span><span class='line'>Why Some Sleep Deprived Brains
</span><span class='line'>Why I Like Instapaper Redesigns Foursquare Checkin Offers Readers Cause Problems And Should Set Theorists
</span><span class='line'>Why Dropbox S More Music Gear Online Teaching Ror Developers</span></code></pre></td></tr></table></div></figure>


<p>They are nice and random, and clearly contain the right buzzwords, but they aren&#8217;t very grammatical and therefore can&#8217;t be funny. <strong>Humor relies on surprise:</strong> setting up an expectation, then delivering something different. With bigrams, you never get a coherent enough sentence to generate an expectation, so no shot at being funny.</p>

<p>Let&#8217;s smooth out our chains by moving from bigrams to trigrams. So instead of looking at what follows a given individual word in our training corpus, we&#8217;ll look at what follows a pair of words. Here are some examples - note that the grammar is significantly better and some are worth a chuckle. I particularly like 7 and 10.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>My Year Of Experience Is A Big Twist
</span><span class='line'>Engine Yard
</span><span class='line'>Mini-microsoft: Compensatory Arrangements Of Certain (microsoft) Officers
</span><span class='line'>The 12-step Landing Page
</span><span class='line'>More Webmaster Questions - Answered
</span><span class='line'>Scripting Gnu Screen
</span><span class='line'>The Full Social Network Buttons To Operate On Your Terrorist Neighbor
</span><span class='line'>Typical Tech Entrepreneur?
</span><span class='line'>The Lost Lesson Of 'free'
</span><span class='line'>Contact Lenses Are Curing The Founder's Syndrome</span></code></pre></td></tr></table></div></figure>


<h3>Which seed?</h3>

<p>HN is at its least self conscious and most easily lampooned when doling out advice. Consider these &#8216;how&#8217;- and &#8216;why&#8217;-seeded sentences:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>How To Choose The Right People And The Chance To Present
</span><span class='line'>Why Javascript Is Broken
</span><span class='line'>How Do You Manage Your Startup’s Pr At Tech Startups Are Moving To Rackspace
</span><span class='line'>Why Do Organic Eggs Come In Bunches
</span><span class='line'>How Apple Is The Prevalence Of Qwerty
</span><span class='line'>Why Google Wants To Magically Transfer Gov Debt To Darwin
</span><span class='line'>How To Finance Your App From The Lhc Will See Global History Of Governments And Geeks Parse The World
</span><span class='line'>Why Are Bank Security Questions On Agile
</span><span class='line'>How To Hack The Us - So Stock Up 879.55%
</span><span class='line'>Why Computer Displays Suck For You</span></code></pre></td></tr></table></div></figure>


<p>When we choose a first word randomly from all the words that have ever been in headlines, we get a bigger assortment, but I think they&#8217;re less funny:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Canonical Contributes Only 1% Of Profit
</span><span class='line'>Google Uneveils New Search Results With Google's Closure Of Paid Prioritization
</span><span class='line'>What Do You Deal With Worldnow, Adds 19 Million Potential Users
</span><span class='line'>Diminishing Dead-tree Media And Mobile Computing Is A Beautiful Monster
</span><span class='line'>Ask Hn Yahoos: What Yahoo Should Do To Excel
</span><span class='line'>China Demands New Pcs Is Ruined By A Thousand Years
</span><span class='line'>Freemium: A Business Plan Competition
</span><span class='line'>Buy My Blog, Please
</span><span class='line'>Why I Am In Your Field?
</span><span class='line'>8 Tips To Considerate When Planning To Move Themselves (neural Network)</span></code></pre></td></tr></table></div></figure>


<p>The other drawback is that they&#8217;re more likely to hit on a seed with only one possible resulting sentence, like &#8220;Buy My Blog, Please,&#8221; above.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>grep -i <span class="s2">&quot;buy my blog&quot;</span> ../hnfull.txt
</span><span class='line'>Gawker media boss Nick Denton: Buy my blog, please
</span></code></pre></td></tr></table></div></figure>


<p>If you think of the bot as walking through the possibilities, a common seed like &#8216;how&#8217; will branch of lots of different ways, so there are many paths for the bot to walk and thus many possible sentence outcomes. A less common seed, like &#8220;scripting&#8221; will result in fewer possible paths, and more likely to just return a real headline verbatim. There were only 10 ways to finish &#8220;buy my&#8221; in our corpus of 350,000 training headlines, compared to 7,710 ways to finish &#8220;how to.&#8221;</p>

<h3>Raising the stakes</h3>

<p>But how to make it as funny as possible? Some possible improvements:</p>

<ul>
<li><strong>Crowdsource funniness ratings</strong> (with mechanical turk or a &#8216;hot or not&#8217; app, etc). Only tweet out the funniest headlines.</li>
<li>Feed the funniness ratings back into the algorithm. For example, only use the <strong>funniest seeds.</strong></li>
<li>Do <strong>semantic analysis</strong> of parts of speech in the training corpus and use them with templates. This would improve grammar but decrease spontaneity.</li>
<li>Hire Nick and Dave to crank out <a href="http://www.linkedlistnyc.org/archive/issue_081.html">more of these</a> :)</li>
</ul>


<p>Any other ideas?</p>
]]></content>
  </entry>
  
</feed>
